# VM vs Docker Benchmark

Este proyecto compara el rendimiento de una aplicaciÃ³n ejecutÃ¡ndose en una MÃ¡quina Virtual (VM) vs Docker. Utiliza un servidor Flask y realiza benchmarks de CPU, RAM y latencia durante 60 segundos. Los resultados se guardan en archivos CSV y TXT, y se visualizan con un Jupyter Notebook.

## ğŸ§± MÃ¡quinas Virtuales vs Contenedores Docker
Â¿QuÃ© es una MÃ¡quina Virtual (VM)?
Una mÃ¡quina virtual es una emulaciÃ³n completa de un sistema operativo que se ejecuta sobre otro sistema operativo anfitriÃ³n, usando un hipervisor (como VirtualBox o VMware). Cada VM tiene su propio kernel, memoria, disco y red virtualizados.

### âœ… Ventajas:
- Aislamiento total del sistema huÃ©sped.

- Permiten ejecutar diferentes sistemas operativos.

- Muy Ãºtil para simular entornos de producciÃ³n.

### âŒ Desventajas:
- Requieren mÃ¡s recursos (RAM, CPU, almacenamiento).

- MÃ¡s lentas para iniciar y ejecutar procesos.

- AdministraciÃ³n mÃ¡s pesada comparado con contenedores.

## Â¿QuÃ© es un Contenedor Docker?
Un contenedor Docker es una unidad ligera y portable que empaqueta una aplicaciÃ³n y todas sus dependencias, ejecutÃ¡ndose sobre el kernel del sistema anfitriÃ³n. A diferencia de las VMs, los contenedores no requieren un sistema operativo completo, solo lo necesario para que la aplicaciÃ³n funcione.

### âœ… Ventajas:
- Muy ligeros y rÃ¡pidos de iniciar.

- Aislamiento eficiente de aplicaciones.

- FÃ¡cil despliegue y escalabilidad.

- Uso eficiente de recursos del sistema.

### âŒ Desventajas:
- Aislamiento menor comparado con VMs (usan el mismo kernel del host).

- Dependencia del sistema operativo base.

- Puede ser mÃ¡s complejo asegurar ciertos entornos si se mezclan contenedores mal diseÃ±ados.

## ğŸ•¹ï¸ RelaciÃ³n con el Proyecto (Tetris + Benchmarking)
Este proyecto consiste en un servidor de Tetris implementado con HTML, JavaScript y Python, que incluye un sistema de benchmarking automatizado para comparar el rendimiento al ejecutarlo en diferentes entornos.

### Â¿Por quÃ© usar VM y Docker?
El objetivo es comparar cÃ³mo se comporta el servidor de Tetris en una mÃ¡quina virtual frente a un contenedor Docker en tÃ©rminos de:

- Tiempo de respuesta.

- Uso de recursos.

- Estabilidad bajo carga.

- Benchmarking en contexto:

El archivo benchmark.py ejecuta pruebas de carga durante un minuto mientras el servidor corre, y guarda los resultados en la carpeta results/. Esto permite medir cÃ³mo cada entorno afecta al rendimiento del juego.

- Utilidad real:

Esta comparaciÃ³n ayuda a entender cuÃ¡l tecnologÃ­a es mÃ¡s eficiente o conveniente para desplegar aplicaciones web como este Tetris, dependiendo de las necesidades del proyecto (por ejemplo, desarrollo local, producciÃ³n, escalado, etc.).

## ConfiguraciÃ³n del entorno de prueba
Host: mÃ¡quina fÃ­sica con sistema Linux o WSL2, 8 GB RAM, 4 nÃºcleos.

VM: Ubuntu 22.04 con 2 vCPU, 4 GB RAM.

Docker: imagen base de Python 3.9 + dependencias instaladas desde requirements.txt.

Entorno comÃºn: scripts idÃ©nticos, misma duraciÃ³n de benchmark (60s), mismo servidor Flask simulado.


##  MÃ©tricas y herramientas utilizadas

- Se midieron 3 mÃ©tricas clave durante la ejecuciÃ³n:

    - Latencia promedio de respuesta del servidor Flask

    - Uso de CPU (%) del proceso Python

    - Uso de RAM (MB) del proceso

- Herramientas utilizadas:

    - psutil: para mÃ©tricas del sistema

    - Flask: servidor HTTP simulado

    - pandas, matplotlib: para anÃ¡lisis y visualizaciÃ³n

    - Jupyter Notebook: para visualizar los resultados


## ğŸ“ Estructura del Proyecto

```bash
vm_vs_docker_benchmark/
â”œâ”€â”€ notebooks/
â”‚ â””â”€â”€ vm_vs_docker_comparison.ipynb â† Jupyter Notebook para visualizaciÃ³n
â”œâ”€â”€ results/ â† Resultados generados automÃ¡ticamente
â”‚ â”œâ”€â”€ benchmark_vm.csv
â”‚ â”œâ”€â”€ benchmark_docker.csv
â”‚ â””â”€â”€ ...
â”œâ”€â”€ scripts/
â”‚ â”œâ”€â”€ benchmark.py â† Script principal de benchmarking
â”‚ â”œâ”€â”€ run_server.py â† Servidor Flask simulado
â”‚ â”œâ”€â”€ docker_setup.sh â† Inicializador para Docker
â”‚ â””â”€â”€ vm_setup.sh â† Inicializador para VM
â”œâ”€â”€ tetris/ â† CÃ³digo del servidor simulado
â”‚ â”œâ”€â”€ index.html
â”‚ â”œâ”€â”€ game.js
â”‚ â””â”€â”€ style.css
â”œâ”€â”€ requirements.txt â† Dependencias Python
â””â”€â”€ README.md â† Este archivo
```

## âš™ï¸ InstalaciÃ³n de dependencias

Primero, asegÃºrate de tener Python 3 instalado.

1. Abre una terminal en la raÃ­z del proyecto.
2. Ejecuta:

```bash
pip install -r requirements.txt
```

Esto instalarÃ¡:

- Flask

- pandas

- Matplotlib

- Psutil

- JupyterLab

## ğŸ§ª AutomatizaciÃ³n del entorno VM & DOCKER


Puedes usar los siguientes scripts para automatizar la instalaciÃ³n del entorno:

```bash
cd scripts
bash vm_setup.sh         # ConfiguraciÃ³n para VM
bash sh docker_setup.sh     # ConfiguraciÃ³n para Docker (edited)
```


## ğŸš€ CÃ³mo ejecutar el benchmark

1. Iniciar el servidor simulado

```bash
cd scripts
python run_server.p
```

Esto levantarÃ¡ un servidor en http://localhost:8000.

2. Ejecutar benchmark
En otra terminal, ejecuta:

```bash
cd scripts
python benchmark.py
```

Este script te preguntarÃ¡ si estÃ¡s ejecutando desde una vm o docker. DespuÃ©s de 60 segundos, guardarÃ¡ los resultados en la carpeta results/.

## ğŸ“Š Visualizar los resultados

1. Inicia Jupyter Lab o Notebook
```bash
jupyter lab
```

O:
```bash
jupyter notebook
```

Abre el archivo:

`notebooks/vm_vs_docker_comparison.ipynb`
Este notebook generarÃ¡ grÃ¡ficos comparativos de:

- Latencia

- Uso de CPU

- Uso de RAM

Basados en los archivos CSV generados por el benchmark.

---

| ğŸ–¥ï¸ Virtual Machine | ğŸ³ Docker |
|--------------------------|------------------|
| ![VM](results/Benchmark_VM.png) | ![Docker](results/Benchmark_Docker.png) |


<p align="center">
  <img src="notebooks/Uso_CPU_comparison.png" alt="Uso CPU" width="600"/>
</p> 

<p align="center">
  <img src="notebooks/Uso_RAM_Comparison.png" alt="Uso RAM" width="600"/>
</p> 

---

## ğŸ§¼ Recomendaciones
Ejecuta los benchmarks por separado: una vez desde Docker, otra desde la VM.

AsegÃºrate de no tener procesos pesados corriendo durante las pruebas.

Si usas WSL, asegÃºrate de que Jupyter y los scripts corren en el mismo entorno.

## ğŸ›  Requisitos

- Python 3.8+

- pip

- Docker (si usarÃ¡s el contenedor)

- JupyterLab o Jupyter Notebook

## ğŸ” Aislamiento y Seguridad
### ğŸ§â€â™‚ï¸ Aislamiento
El aislamiento es fundamental cuando se comparan entornos como mÃ¡quinas virtuales (VM) y contenedores Docker. Este proyecto utiliza ambos enfoques para entender cÃ³mo afectan al rendimiento y la seguridad del servidor Tetris.

#### En MÃ¡quinas Virtuales:
- Cada VM tiene su propio sistema operativo, kernel, red y almacenamiento virtualizado.

- El aislamiento es casi total, lo que evita interferencias con el sistema anfitriÃ³n o entre VMs.

- Ideal para ejecutar mÃºltiples entornos distintos (por ejemplo, Linux y Windows en la misma mÃ¡quina).

#### En Docker:
- Los contenedores comparten el kernel del sistema anfitriÃ³n, pero se aÃ­slan mediante espacios de nombres (namespaces) y control de recursos (cgroups).

- El aislamiento es mÃ¡s ligero, lo que mejora el rendimiento pero puede ser menos robusto en comparaciÃ³n con VMs.

- Se recomienda seguir buenas prÃ¡cticas (no usar contenedores privilegiados, gestionar permisos, etc.).

## ğŸ›¡ï¸ Seguridad
La seguridad en ambos entornos impacta directamente en la confiabilidad del servidor Tetris, especialmente al ejecutar pruebas automatizadas con cargas altas.

#### Seguridad en MÃ¡quinas Virtuales:
- Cada VM actÃºa como una caja negra: una vulnerabilidad dentro de una VM no afecta directamente al host.

- Mejor contenciÃ³n en caso de ataques o errores graves.

- Parches y actualizaciones pueden ser gestionados como si fueran mÃ¡quinas fÃ­sicas.

#### Seguridad en Docker:
- Requiere configuraciÃ³n cuidadosa para evitar accesos indebidos al sistema anfitriÃ³n.

- El uso de imÃ¡genes oficiales y verificadas es clave para reducir riesgos.

- Puede combinarse con herramientas como AppArmor, SELinux o seccomp para reforzar la seguridad.

## ğŸ” AplicaciÃ³n al Proyecto
En el contexto del servidor Tetris con benchmarking:

- Entornos aislados = resultados confiables: Al ejecutar las pruebas en contenedores y VMs separadas, se evita que otros procesos afecten los resultados del benchmark.

- SimulaciÃ³n de entornos reales: Permite probar el rendimiento como si el servidor se desplegara en producciÃ³n, evaluando la seguridad y estabilidad de cada opciÃ³n.

- MitigaciÃ³n de riesgos: El aislamiento previene que errores en el servidor de Tetris (por ejemplo, scripts maliciosos o cargas pesadas) afecten al sistema anfitriÃ³n.



